<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    
    <link href=https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css rel=stylesheet>
    <title>防火墙web自动化</title>
    <meta name="generator" content="HTMLTestRunner 0.8.2"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    
<style type="text/css" media="screen">
body        { font-family: Microsoft YaHei,Tahoma,arial,helvetica,sans-serif;padding: 20px; font-size: 80%; }
table       { font-size: 100%; }


/* -- heading ---------------------------------------------------------------------- */
h1 {
	font-size: 16pt;
	color: gray;
}
.heading {
    margin-top: 0ex;
    margin-bottom: 1ex;
}

.heading .attribute {
    margin-top: 1ex;
    margin-bottom: 0;
}

.heading .description {
    margin-top: 4ex;
    margin-bottom: 6ex;
}

/* -- css div popup ------------------------------------------------------------------------ */
a.popup_link {
}

a.popup_link:hover {
    color: red;
}

.popup_window {
    display: none;
    position: relative;
    left: 0px;
    top: 0px;
    /*border: solid #627173 1px; */
    padding: 10px;
    background-color: #E6E6D6;
    font-family: "Lucida Console", "Courier New", Courier, monospace;
    text-align: left;
    font-size: 8pt;
    width: 500px;
}

}
/* -- report ------------------------------------------------------------------------ */
#show_detail_line {
    margin-top: 3ex;
    margin-bottom: 1ex;
}
#result_table {
    width: 80%;
    border-collapse: collapse;
    border: 1px solid #777;
}
#header_row {
    font-weight: bold;
    color: white;
    background-color: #777;
}
#result_table td {
    border: 1px solid #777;
    padding: 2px;
}
#total_row  { font-weight: bold; }
.passClass  { background-color: #6c6; }
.failClass  { background-color: #c60; }
.errorClass { background-color: #c00; }
.passCase   { color: #6c6; }
.failCase   { color: #c60; font-weight: bold; }
.errorCase  { color: #c00; font-weight: bold; }
.hiddenRow  { display: none; }
.testcase   { margin-left: 2em; }


/* -- ending ---------------------------------------------------------------------- */
#ending {
}

</style>

</head>
<body>
<script language="javascript" type="text/javascript"><!--
output_list = Array();

function showCase(level) {
    trs = document.getElementsByTagName("tr");
    for (var i = 0; i < trs.length; i++) {
        tr = trs[i];
        id = tr.id;
        
        tr.className = '';
        if(level==0 && (id.substr(0,2)=='pt'||id.substr(0,2)=='ft')){
          tr.className = 'hiddenRow';
        }

        if(level==1 && id.substr(0,2)=='pt'){
          tr.className = 'hiddenRow';
        }
        if(level==2 && id.substr(0,2) == 'ft'){
          tr.className = 'hiddenRow';
        }
        
    
        
    }

   
}




function html_escape(s) {
    s = s.replace(/&/g,'&amp;');
    s = s.replace(/</g,'&lt;');
    s = s.replace(/>/g,'&gt;');
    return s;
}

function toggleBox(tid){
    console.log(document.getElementById('div_'+tid));
    
    if(document.getElementById('div_'+tid).style.display=="none"){
        document.getElementById('div_'+tid).style.display="block"
    }else{
        document.getElementById('div_'+tid).style.display="none"
    }
}

function hideAll(){
    trs = document.getElementsByTagName("tr");
    for (var i = 0; i < trs.length; i++) {
    //console.log(trs[i])
     id = trs[i].id;
     if (id.substr(0,2) == 'pt'||id.substr(0,2) == 'ft' ) {
        if(trs[i].style.display=="none"){
         trs[i].style.display="table-row"
        }else{
         trs[i].style.display="none"
        }
     }
    }
    if( document.getElementById('c1').innerText=="详细"){
        document.getElementById('c1').innerHTML="收起"
    }else{
        document.getElementById('c1').innerHTML="详细"
    }
    
}

/* obsoleted by detail in <div>
function showOutput(id, name) {
    var w = window.open("", //url
                    name,
                    "resizable,scrollbars,status,width=800,height=450");
    d = w.document;
    d.write("<pre>");
    d.write(html_escape(output_list[id]));
    d.write("\n");
    d.write("<a href='javascript:window.close()'>close</a>\n");
    d.write("</pre>\n");
    d.close();
}
*/
--></script>

<div class='heading'>
<h1>防火墙web自动化</h1>
<p class='attribute'><strong>测试人员:</strong> 朱浩龙</p>
<p class='attribute'><strong>开始时间:</strong> 2018-11-07 15:34:13</p>
<p class='attribute'><strong>合计耗时:</strong> 0:02:30.850401</p>
<p class='attribute'><strong>测试结果:</strong> 共 6 条用例，通过 5 条，，失败 1 条，通过率= 83.33%</p>

<p class='description'>结果如下</p>
</div>



    <p id='show_detail_line'>
    <a class="btn btn-primary" href='javascript:showCase(0)'>概要{ 83.33% }</a>
    <a class="btn btn-danger" href='javascript:showCase(1)'>失败{ 1 }</a>
    <a class="btn btn-success" href='javascript:showCase(2)'>通过{ 5 }</a>
    <a class="btn btn-info" href='javascript:showCase(3)'>所有{ 6 }</a>
    </p>
    <table id='result_table' class="table table-condensed table-bordered table-hover">
    <colgroup>
    <col align='left' />
    <col align='right' />
    <col align='right' />
    <col align='right' />
    <col align='right' />
    <col align='right' />
    </colgroup>
    <tr id='header_row' class="text-center success" style="font-weight: bold;font-size: 14px;">
        <td>用例集</td>
        <td>总计</td>
        <td>通过</td>
        <td>失败</td>
        <td>错误</td>
        <td>详细</td>
    </tr>
    
<tr class='failClass warning'>
    <td class="text-center"></td>
    <td class="text-center">6</td>
    <td class="text-center">5</td>
    <td class="text-center">1</td>
    <td class="text-center">0</td>
    <td class="text-center"></td>
</tr>

<tr id='pt1_1' class='hiddenRow'>
    <td class='none'><div class='testcase'>test_1</div></td>
    <td colspan='5' align='center'><span class="label label-success success">通过</span></td>
</tr>

<tr id='pt1_2' class='hiddenRow'>
    <td class='none'><div class='testcase'>test_2</div></td>
    <td colspan='5' align='center'><span class="label label-success success">通过</span></td>
</tr>

<tr id='pt1_3' class='hiddenRow'>
    <td class='none'><div class='testcase'>test_3</div></td>
    <td colspan='5' align='center'><span class="label label-success success">通过</span></td>
</tr>

<tr id='pt1_4' class='hiddenRow'>
    <td class='none'><div class='testcase'>test_4</div></td>
    <td colspan='5' align='center'><span class="label label-success success">通过</span></td>
</tr>

<tr id='pt1_5' class='hiddenRow'>
    <td class='none'><div class='testcase'>test_5</div></td>
    <td colspan='5' align='center'><span class="label label-success success">通过</span></td>
</tr>

<tr id='ft1_6' class='none'>
    <td class='failCase'><div class='testcase'>test_6</div></td>
    <td colspan='5' align='center'>

     <!--Ĭ�����������Ϣ -Findyou
    <button id='btn_ft1_6' type="button"  class="btn btn-danger btn-xs collapsed" data-toggle="collapse"  onclick="toggleBox('ft1_6')" data-target='#div_ft1_6'>失败</button>
    <div id='div_ft1_6' class="collapse">  -->
    
    <!-- Ĭ��չ��������Ϣ -Findyou -->
    <button id='btn_ft1_6' type="button"  class="btn btn-danger btn-xs" data-toggle="collapse"  onclick="toggleBox('ft1_6')" data-target='#div_ft1_6'>失败</button>
    <div id='div_ft1_6' class="collapse in">
    <pre>
    
ft1_6: Traceback (most recent call last):
  File "E:\demo\web自动化\test\建立snat策略.py", line 29, in test_6
    self.assertIn(c[0][3],a.houtai())
AssertionError: '20.1.1.50' not found in 'Chain PREROUTING (policy ACCEPT 491 packets, 28634 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 HIDEDNAT   all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n 111K 7073K HIDEPORTMAP  all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n    0     0 HIDEIPMAP  all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n    0     0 TRANS_PROXY  all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n 111K 7074K PORTMAP    all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n    0     0 IPMAP      all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n    0     0 ANTISPAM_PREROUTING  all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n    0     0 MAIL_FILTER_PREROUTING  all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n    0     0 AVPROXY_PREROUTING  all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n\nChain OUTPUT (policy ACCEPT 4 packets, 257 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain POSTROUTING (policy ACCEPT 0 packets, 0 bytes)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 HIDESNAT   all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n    4   240 ACCEPT     all  --  *      lo      0.0.0.0/0            0.0.0.0/0           \n    0     0 PORTMAPNAT  all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n    0     0 IPMAPNAT   all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n34364 2240K POSTROUTINGNAT  all  --  *      *       0.0.0.0/0            0.0.0.0/0           \n\nChain ANTISPAM_PREROUTING (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain AVPROXY_PREROUTING (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain HIDEDNAT (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain HIDEIPMAP (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain HIDEPORTMAP (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 LOGX       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           source IP range destination IP range 10.1.1.15-10.1.1.15 tcp dpt:42424 groupid: pnat2LOGX nolog,type 0,action DROP \n    0     0 LOGX       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           srcaddr:_prg_elur100001 source IP range destination IP range 10.1.1.15-10.1.1.15 tcp dpt:42424 groupid: pnat1LOGX nolog,type 0,action DROP \n\nChain HIDESNAT (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain IPMAP (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain IPMAPNAT (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain MAIL_FILTER_PREROUTING (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain PORTMAP (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           source IP range destination IP range 10.1.1.1-10.1.1.1 servobj: ASP_Net_Session tcp dpt:42424 groupid: pnat2nolog,type 0 to:10.1.1.15:42424 \n    0     0 DNAT       tcp  --  *      *       0.0.0.0/0            0.0.0.0/0           srcaddr:_prg_elur100001 source IP range destination IP range 10.1.5.254-10.1.5.254 servobj: ASP_Net_Session tcp dpt:42424 groupid: pnat1nolog,type 0 to:10.1.1.15:42424 \n\nChain PORTMAPNAT (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n\nChain POSTROUTINGNAT (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n34304 2225K MASQUERADE  all  --  *      eth0    0.0.0.0/0            0.0.0.0/0           groupid: nat2nolog,type 1 \n    0     0 MASQUERADE  all  --  *      eth0    0.0.0.0/0            0.0.0.0/0           groupid: nat4nolog,type 1 \n    0     0 MASQUERADE  all  --  *      eth0    0.0.0.0/0            0.0.0.0/0           groupid: nat5nolog,type 1 \n    0     0 SNAT       all  --  *      eth2    0.0.0.0/0            0.0.0.0/0           srcaddr:_prg_elur100007 groupid: zhlnolog,type 1 to:192.168.0.1-192.168.0.25 \n\nChain TRANS_PROXY (1 references)\n pkts bytes target     prot opt in     out     source               destination         \n'


    </pre>
    </div>

    </td>
</tr>

    <tr id='total_row' class="text-center active">
        <td>总计</td>
        <td>6</td>
        <td>5</td>
        <td>1</td>
        <td>0</td>
        <td>通过率83.33%</td>
    </tr>
    </table>

<div id='ending'>&nbsp;</div>
        <div style=" position:fixed;right:50px; bottom:30px; width:20px; height:20px;cursor:pointer">
        <a href="#"><span class="glyphicon glyphicon-eject" style = "font-size:30px;" aria-hidden="true">
        </span></a></div>
        

</body>
</html>
